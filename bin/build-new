#!/usr/bin/env node

/*
    This script is called by travis once a day and checks the
    [maven repository](https://mvnrepository.com/artifact/org.openapitools/openapi-generator-cli)
    for a new version builds the package(s) for the new version(s).
*/

const lib = require("../lib");

(async function() {
  const {
    downloadLink,
    version
  } = await lib.getOpenapiGeneratorCliDownloadLink();
  const alreadyPublishedVersions = await lib.getAlreadyPublishedVersion();

  if (alreadyPublishedVersions.indexOf(version) === -1) {
    lib.buildPackage(version, downloadLink);
  }
})();
